{"ast":null,"code":"var _jsxFileName = \"D:\\\\BrotoType\\\\week16\\\\User Management  React-js\\\\frontend\\\\src\\\\components\\\\Admin\\\\AdminHome.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport Header from './AHeader';\nimport DataTable from 'react-data-table-component';\nimport { useNavigate } from 'react-router-dom';\nimport Card from \"@material-ui/core/Card\";\nimport Button from \"@mui/material/Button\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nimport EditIcon from \"@mui/icons-material/Edit\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AdminHome() {\n  _s();\n\n  const navigate = useNavigate();\n  const [userDetails, setuserDetails] = useState([]);\n  const [refresh, setRefresh] = useState(false);\n  const [search, setsearch] = useState(\"\");\n  const [filterValue, setfilterValue] = useState([]);\n  useEffect(() => {\n    const adminInfo = localStorage.getItem(\"admininfo\");\n\n    if (adminInfo) {\n      navigate(\"/admin\");\n\n      (async function () {\n        try {\n          const config = {\n            headers: {\n              \"Content-type\": \"application/json\"\n            }\n          };\n          const {\n            data\n          } = await axios.get(\"/api/admin\", config);\n          console.log(data);\n          setuserDetails(data);\n          setfilterValue(data);\n        } catch (error) {\n          throw new error(error.response.data.message);\n        }\n      })();\n    } else {\n      navigate(\"/admin\");\n    }\n  }, [refresh, navigate]);\n  useEffect(() => {\n    const result = userDetails.filter(users => {\n      return users.name.toLowerCase().match(search.toLowerCase());\n    });\n    setfilterValue(result);\n  }, [search]);\n\n  const deleteuser = async userId => {\n    if (window.confirm(`Sure to Delete?`)) {\n      try {\n        const config = {\n          headers: {\n            \"Content-type\": \"application/json\"\n          }\n        };\n        await axios.delete(\"/api/admin/deleteuser\", {\n          params: {\n            id: userId\n          },\n          config\n        });\n        setRefresh(!refresh);\n      } catch (error) {\n        throw new error(error.response.data.message);\n      }\n    }\n  };\n\n  const editHandler = async userId => {\n    try {\n      navigate(`/edituser/${userId}`);\n    } catch (error) {\n      throw new error(error.response.data.message);\n    }\n  };\n\n  const columns = [{\n    name: \"Name\",\n    selector: row => row.name,\n    sortable: true\n  }, {\n    name: \"Email\",\n    selector: row => row.email,\n    sortable: true\n  }, {\n    name: \"\",\n    cell: row => /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"outlined\",\n      color: \"primary\",\n      startIcon: /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 22\n      }, this),\n      onClick: () => {\n        editHandler(row._id);\n      },\n      children: \"Edit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this)\n  }, {\n    name: \"\",\n    cell: row => /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"outlined\",\n      color: \"error\",\n      startIcon: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 22\n      }, this),\n      onClick: () => deleteuser(row._id),\n      children: \"Delete\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }, this)\n  }];\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-center\",\n      style: {\n        marginTop: \"150px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        style: {\n          height: \"100%\",\n          width: \"80%\"\n        },\n        children: /*#__PURE__*/_jsxDEV(DataTable, {\n          title: \"User Details\",\n          columns: columns,\n          data: filterValue,\n          pagination: true,\n          fixedHeader: true,\n          highlightOnHover: true,\n          subHeader: true,\n          subHeaderComponent: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Serch here...\",\n            className: \"w-25 form-control\",\n            value: search,\n            onChange: e => {\n              setsearch(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AdminHome, \"yRfA2JEWgON3W6MKNiqVV3Cjt5Q=\", false, function () {\n  return [useNavigate];\n});\n\n_c = AdminHome;\nexport default AdminHome;\n\nvar _c;\n\n$RefreshReg$(_c, \"AdminHome\");","map":{"version":3,"names":["React","useEffect","useState","Header","DataTable","useNavigate","Card","Button","DeleteIcon","EditIcon","axios","AdminHome","navigate","userDetails","setuserDetails","refresh","setRefresh","search","setsearch","filterValue","setfilterValue","adminInfo","localStorage","getItem","config","headers","data","get","console","log","error","response","message","result","filter","users","name","toLowerCase","match","deleteuser","userId","window","confirm","delete","params","id","editHandler","columns","selector","row","sortable","email","cell","_id","marginTop","height","width","e","target","value"],"sources":["D:/BrotoType/week16/User Management  React-js/frontend/src/components/Admin/AdminHome.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport Header from './AHeader'\r\nimport DataTable from 'react-data-table-component'\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Card from \"@material-ui/core/Card\";\r\nimport Button from \"@mui/material/Button\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport EditIcon from \"@mui/icons-material/Edit\";\r\nimport axios from 'axios';\r\n\r\nfunction AdminHome() {\r\n  const navigate = useNavigate();\r\n  const [userDetails, setuserDetails] = useState([]);\r\n  const [refresh, setRefresh] = useState(false);\r\n  const [search, setsearch] = useState(\"\");\r\n  const [filterValue, setfilterValue] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const adminInfo = localStorage.getItem(\"admininfo\");\r\n    if (adminInfo) {\r\n      navigate(\"/admin\");\r\n      (async function () {\r\n        try {\r\n          const config = {\r\n            headers: {\r\n              \"Content-type\": \"application/json\",\r\n            },\r\n          };\r\n\r\n          const { data } = await axios.get(\"/api/admin\", config);\r\n          console.log(data);\r\n          setuserDetails(data);\r\n          setfilterValue(data);\r\n        } catch (error) {\r\n          throw new error(error.response.data.message);\r\n        }\r\n      })();\r\n    } else {\r\n      navigate(\"/admin\");\r\n    }\r\n  }, [refresh, navigate]);\r\n\r\n  useEffect(() => {\r\n    const result = userDetails.filter((users) => {\r\n      return users.name.toLowerCase().match(search.toLowerCase());\r\n    });\r\n    setfilterValue(result);\r\n  }, [search]);\r\n\r\n\r\n  const deleteuser = async (userId) => {\r\n    if (window.confirm(`Sure to Delete?`)) {\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          \"Content-type\": \"application/json\",\r\n        },\r\n      };\r\n      await axios.delete(\"/api/admin/deleteuser\", {\r\n        params: {\r\n          id: userId,\r\n        },\r\n        config,\r\n      });\r\n      setRefresh(!refresh);\r\n    } catch (error) {\r\n      throw new error(error.response.data.message);\r\n    }\r\n  }\r\n  };\r\n\r\n  const editHandler = async (userId) => {\r\n    try {\r\n      navigate(`/edituser/${userId}`);\r\n    } catch (error) {\r\n      throw new error(error.response.data.message);\r\n    }\r\n  };\r\n\r\n\r\n  const columns = [\r\n    {\r\n      name: \"Name\",\r\n      selector: (row) => row.name,\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: \"Email\",\r\n      selector: (row) => row.email,\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: \"\",\r\n      cell: (row) => (\r\n        <Button\r\n          variant=\"outlined\"\r\n          color=\"primary\"\r\n          startIcon={<EditIcon />}\r\n          onClick={() => {\r\n            editHandler(row._id);\r\n          }}\r\n        >\r\n          Edit\r\n        </Button>\r\n      ),\r\n    },\r\n    {\r\n      name: \"\",\r\n      cell: (row) => (\r\n        <Button\r\n          variant=\"outlined\"\r\n          color=\"error\"\r\n          startIcon={<DeleteIcon />}\r\n          onClick={() => deleteuser(row._id)}\r\n        >\r\n          Delete\r\n        </Button>\r\n      ),\r\n    },\r\n  ];\r\n  return (\r\n\r\n    <React.Fragment>\r\n      <Header/>\r\n\r\n      <div\r\n      className=\"d-flex justify-content-center\"\r\n      style={{ marginTop: \"150px\" }}\r\n    >\r\n      <Card style={{ height: \"100%\", width: \"80%\" }}>\r\n        <DataTable\r\n          title={\"User Details\"}\r\n          columns={columns}\r\n          data={filterValue}\r\n          pagination\r\n          fixedHeader\r\n          highlightOnHover\r\n          subHeader\r\n          subHeaderComponent={\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Serch here...\"\r\n              className=\"w-25 form-control\"\r\n              value={search}\r\n              onChange={(e) => {\r\n                setsearch(e.target.value);\r\n              }}\r\n            />\r\n          }\r\n        />\r\n      </Card>\r\n    </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default AdminHome"],"mappings":"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"},"metadata":{},"sourceType":"module"}